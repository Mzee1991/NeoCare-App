{% load static %}
{% load crispy_forms_tags %}
{% load bootstrap4 %}

<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    {% if title %}
        <title>NICU - {{ title }}</title>
    {% else %}
        <title>NICU</title>
    {% endif %}

    <!-- Bootstrap CSS -->
    {% bootstrap_css %}

    <style type="text/css">
        /* Add custom styles for print */
        @media print {
            /* Hide unnecessary elements */
            .no-print {
                display: none !important;
            }

            /* Set margins for printed page */
            body {
                margin-top: 20mm;
                margin-bottom: 20mm;
                margin-left: 20mm;
                margin-right: 20mm;
            }
        }

    </style>
</head>
<body>
<div class="container">

    <header class="text-center mt-5">
        <h1>Holy Innocents Children's Hospital</h1>
    </header>

    <section class="row mt-5">
        <div class="container">
            <div class="card mb-4">
                <div class="card-header text-center">
                    <h3>Newborn Details</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">
                                    <h4 class="mb-0">Admission Details</h4>
                                </div>
                                <div class="card-body">
                                    <p><b>Date of Admission:</b> {{ newborn.admission_date|date:"F j, Y" }}</p>
                                    <p><b>Time of Admission:</b> {{ newborn.admission_date|time:"g:i a" }}</p>
                                    <p><b>Baby's Name:</b> {{ newborn.name }}</p>
                                    <p><b>Sex:</b> {{ newborn.sex }}</p>
                                    <p><b>Birth Weight:</b> {{ newborn.birth_weight }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="mb-0">Delivery Details</h4>
                                </div>
                                <div class="card-body">
                                    <p><b>Date and Time of Birth:</b> {{ newborn.delivery_date }}</p>
                                    <p><b>Place of Birth:</b> {{ newborn.place_of_birth }}</p>
                                    <p><b>Mode of Delivery:</b> {{ newborn.mode_of_delivery }}</p>
                                    <p><b>Was the Baby Resuscitated?:</b> {{ newborn.resuscitated }}</p>
                                    <p><b>Did the Child Come as Referral?:</b> {{ newborn.referral }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header text-center">
                    <h3>Mother's Demographics</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">
                                    <h4 class="mb-0">BioData</h4>
                                </div>
                                <div class="card-body">
                                    <ul class="list-group">
                                        <li class="list-group-item"><b>Mother's Name:</b> {{ newborn.mother.name }}</li>
                                        <li class="list-group-item"><b>Mother's Age:</b> {{ newborn.mother.age }}</li>
                                        <li class="list-group-item"><b>Mother's NIN:</b> {{ newborn.mother.location.nin_no }}</li>
                                        <li class="list-group-item"><b>Mother's Blood Group:</b> {{ newborn.mother.blood_group }}</li>
                                        <li class="list-group-item"><b>Mother's Occupation:</b> {{ newborn.mother.occupation }}</li>
                                        <li class="list-group-item"><b>Mother's Phone Number:</b> {{ newborn.mother.location.contact }}</li>
                                        <li class="list-group-item"><b>Residential Address:</b> {{ newborn.mother.location.village }},
                                            {{ newborn.mother.location.district }}</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="mb-0">Antenatal History</h4>
                                </div>
                                <div class="card-body">
                                    <!-- Add Antenatal History details here -->
 				    <ul class="list-group">
					    <li class="list-group-item"><b>Did Mother attend Antenatal :</b>{{ antenatal_history.attended }} </li>
					    <li class="list-group-item"><b>Number of Antenatal visits:</b> {{ antenatal_history.number_of_times_attended }} </li>
					    <li class="list-group-item"><b>Place of attendance:</b> {{ antenatal_history.attended_where }} </li>
					    <li class="list-group-item"><b>Conditions During Pregnancy:</b> {{ antenatal_history.conditions_during_pregnancy }}</li>
					    <li class="list-group-item"><b>Did Mother recieve TT:</b> {{ antenatal_history.received_tetanus_toxoid }}</li>
					    <li class="list-group-item"><b>Did Mother screen for Syphilis:</b> {{ antenatal_history.screened_for_syphilis }}</li>
					    <li class="list-group-item"><b>Did Mother recieve Fansidar:</b> {{ antenatal_history.received_fansidar }}</li>
                            	    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
<style>
    .card {
        page-break-inside: avoid;
    }
</style>

<div class="card mb-4">
    <div class="card-header text-center">
        <h3>Clinical Findings</h3>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <div class="card mb-3">
                    <div class="card-header">
                        <h4 class="mb-0">Measurements and Vitals</h4>
                    </div>
                    <div class="card-body">
                        <ul class="list-group">
                            <li class="list-group-item"><b>Current weight:</b> {{ newborn_exams.weight }}</li>
                            <li class="list-group-item"><b>Respiratory rate:</b> {{ newborn_exams.respiratory_rate }}</li>
                            <li class="list-group-item"><b>Heart rate:</b> {{ newborn_exams.heart_rate }}</li>
                            <li class="list-group-item"><b>Temperature:</b> {{ newborn_exams.temperature }}</li>
                            <li class="list-group-item"><b>Random Blood Glucose:</b> N/C </li>
                            <li class="list-group-item"><b>SpO2:</b> N/C </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h4 class="mb-0">Physical Examination</h4>
                    </div>
                    <div class="card-body">
                        <ul class="list-group">
                            <li class="list-group-item"><b>Skin Color:</b> {{ newborn_exams.skin_color }}</li>
                            <li class="list-group-item"><b>General appearance:</b> {{ newborn_exams.general_appearance }}</li>
                            <li class="list-group-item"><b>Head and neck:</b> {{ newborn_exams.head_and_neck }}</li>
                            <li class="list-group-item"><b>Chest:</b> {{ newborn_exams.chest }}</li>
                            <li class="list-group-item"><b>Abdomen:</b> {{ newborn_exams.abdomen }}</li>
                            <li class="list-group-item"><b>Genetalia:</b> {{ newborn_exams.genitalia }}</li>
                            <li class="list-group-item"><b>Extremities:</b> {{ newborn_exams.extremities }}</li>
                            <li class="list-group-item"><b>Neurological exam:</b> {{ newborn_exams.neurological_exam }}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Display Lab Investigations -->
<div class="card mb-4">
    <div class="card-header text-center">
        <h3>Lab Investigations</h3>
    </div>
    <div class="card-body">
        {% if lab_investigation %}
            {% if lab_investigation.serology_rpr or lab_investigation.serology_rct or lab_investigation.serology_bat %}
                <div class="card mb-3">
                    <div class="card-header">
                        <h4 class="mb-0">Serology</h4>
                    </div>
                    <div class="card-body">
                        {% if lab_investigation.serology_rpr %}
                            <p><b>RPR:</b> {{ lab_investigation.serology_rpr }}</p>
                        {% endif %}
                        {% if lab_investigation.serology_rct %}
                            <p><b>RCT:</b> {{ lab_investigation.serology_rct }}</p>
                        {% endif %}
                        {% if lab_investigation.serology_bat %}
                            <p><b>BAT:</b> {{ lab_investigation.serology_bat }}</p>
                        {% endif %}
                    </div>
                </div>
            {% endif %}
            {% if lab_investigation.microbiology_gram_stain or lab_investigation.microbiology_culture %}
                <div class="card mb-3">
                    <div class="card-header">
                        <h4 class="mb-0">Microbiology</h4>
                    </div>
                    <div class="card-body">
                        {% if lab_investigation.microbiology_gram_stain %}
                            <p><b>Gram stain:</b> {{ lab_investigation.microbiology_gram_stain }}</p>
                        {% endif %}
                        {% if lab_investigation.microbiology_culture %}
                            <p><b>Culture:</b> {{ lab_investigation.microbiology_culture }}</p>
                        {% endif %}
                    </div>
                </div>
            {% endif %}
            {% if lab_investigation.chemistry_serum_electrolytes or lab_investigation.chemistry_serum_urea or lab_investigation.chemistry_serum_creatinine or lab_investigation.chemistry_urinalysis %}
                <div class="card mb-3">
                    <div class="card-header">
                        <h4 class="mb-0">Chemistry</h4>
                    </div>
                    <div class="card-body">
                        {% if lab_investigation.chemistry_serum_electrolytes %}
                            <p><b>Serum electrolytes:</b> {{ lab_investigation.chemistry_serum_electrolytes }}</p>
                        {% endif %}
                        {% if lab_investigation.chemistry_serum_urea %}
                            <p><b>Serum Urea:</b> {{ lab_investigation.chemistry_serum_urea }}</p>
                        {% endif %}
                        {% if lab_investigation.chemistry_serum_creatinine %}
                            <p><b>Serum creatinine:</b> {{ lab_investigation.chemistry_serum_creatinine }}</p>
                        {% endif %}
                        {% if lab_investigation.chemistry_urinalysis %}
                            <p><b>Urinalysis:</b> {{ lab_investigation.chemistry_urinalysis }}</p>
                        {% endif %}
                    </div>
                </div>
            {% endif %}
        {% endif %}
    </div>
</div>

        </div>

    </section>

</div>

<footer class="text-center mt-5">
    <button class="btn btn-primary no-print" onclick="window.print()">Print</button>
</footer>

{% bootstrap_javascript jquery='full' %}

</body>
</html>
